__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryPage=void 0;class t{constructor({queryRef:t,client:s,stitcher:o}){this.queryRef=void 0,this.stitcher=void 0,this.client=void 0,this.memo=void 0,this.queryRef=t,this.stitcher=o,this.client=s,this.memo=new WeakMap}watchOnce(s){return this.client.watchOnce(this.queryRef,o=>{this.queryRef!==o?s(new t({...this,queryRef:o})):this.watchOnce(s)})}isLoading(){const t=this.client.readResult({queryRef:this.queryRef});return!t||!!t.deferred}isNetworkErrored(){var t,s;return Boolean(null===(t=this.getResult())||void 0===t||null===(s=t.error)||void 0===s?void 0:s.networkError)}getResult(){var t,s;const o=this.client.readResult({queryRef:this.queryRef});if(null==o||null===(t=o.error)||void 0===t||null===(s=t.extraInfo)||void 0===s||!s.aborted)return null!=o?o:void 0}stitch(t){var s,o,u;const n=this.memo.get(t);if(n)return n;const h=this.getResult();if(!h)return t;if(!this.stitcher)return t;if(!t.data)return t;const{variables:l}=this.queryRef.options,c={variables:l,...t,error:null!==(s=h.error)&&void 0!==s?s:t.error,data:this.stitcher(t.data,{fetchMoreResult:null!==(o=null===(u=this.getResult())||void 0===u?void 0:u.data)&&void 0!==o?o:void 0,variables:l})};return this.memo.set(t,c),c}refetch(s){return new t({...this,queryRef:this.client.executeFrom({queryRef:this.queryRef,options:s})})}}e.QueryPage=t}),"02695f",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createTimeoutSignal=function(t){if(void 0===t||t<=0)return;if(n=AbortSignal,'timeout'in n)return AbortSignal.timeout(t);var n;const o=new AbortController;return setTimeout(()=>o.abort('undefined'!=typeof DOMException?new DOMException('signal timed out','TimeoutError'):'signal timed out'),t),o.signal};babelHelpers.interopRequireDefault(r(d[0]))}),"049e4f",["f30bc0"]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutSignalTransform=function(n){const{timeout:o,multiAbortController:u}=n,c=(0,t().createTimeoutSignal)(o);c&&u.addSufficientSignal(c);return n}}),"067098",["049e4f"]);
__d((function(g,r,i,a,m,e,d){"use strict";function n(){const t=r(d[0]);return n=function(){return t},t}function t(){const n=r(d[1]);return t=function(){return n},n}function o(n){return n.split('?')[0].replace(/\/{2,}/g,'/').replace(/(^\/?([^/]+\/){3}).*/g,'$1').replace(/\/$/,'')}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"computeOperationCacheKey",{enumerable:!0,get:function(){return n().computeOperationCacheKey}}),e.identifyGraphQLTransform=function(o){var u,p;const{operation:c,variables:s,skip:f}=null!==(u=o.queryRef)&&void 0!==u&&u.options?null===(p=o.queryRef)||void 0===p?void 0:p.options:o,y=(0,t().getOperationName)(c),l=(0,t().isQuery)(c)?'query':'mutation',v=(0,n().computeOperationCacheKey)({operationName:y,variables:s,skip:f});return{...o,operationName:y,operationType:l,key:v}},e.identifyRESTTransform=function(n){const{fetchUrl:t,url:u,method:p,body:c,skip:s}=n;return{...n,operationName:o(u),operationType:'query',key:`${t}:${p}:${JSON.stringify(c)}${s?':skipped':''}`}}}),"0b028d",["fa1757","a8e07a"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.visit=function(n,f){var v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,u=void 0,p=Array.isArray(n),y=[n],D=-1,h=[],T=void 0,b=void 0,V=void 0,E=[],A=[],S=n;do{var O=++D===y.length,j=O&&0!==h.length;if(O){if(b=0===A.length?void 0:E[E.length-1],T=V,V=A.pop(),j){if(p)T=T.slice();else{for(var x={},I=0,k=Object.keys(T);I<k.length;I++){var F=k[I];x[F]=T[F]}T=x}for(var N=0,_=0;_<h.length;_++){var w=h[_][0],K=h[_][1];p&&(w-=N),p&&null===K?(T.splice(w,1),N++):T[w]=K}}D=u.index,y=u.keys,h=u.edits,p=u.inArray,u=u.prev}else{if(b=V?p?D:y[D]:void 0,null==(T=V?V[b]:S))continue;V&&E.push(b)}var B,C=void 0;if(!Array.isArray(T)){if(!(0,o.isNode)(T))throw new Error("Invalid AST Node: ".concat((0,t.default)(T),"."));var L=c(f,T.kind,O);if(L){if((C=L.call(f,T,b,V,E,A))===l)break;if(!1===C){if(!O){E.pop();continue}}else if(void 0!==C&&(h.push([b,C]),!O)){if(!(0,o.isNode)(C)){E.pop();continue}T=C}}}if(void 0===C&&j&&h.push([b,T]),O)E.pop();else u={inArray:p,index:D,keys:y,edits:h,prev:u},p=Array.isArray(T),y=p?T:null!==(B=v[T.kind])&&void 0!==B?B:[],D=-1,h=[],V&&A.push(V),V=T}while(void 0!==u);0!==h.length&&(S=h[h.length-1][1]);return S},e.visitInParallel=function(n){var t=new Array(n.length);return{enter:function(o){for(var s=0;s<n.length;s++)if(null==t[s]){var f=c(n[s],o.kind,!1);if(f){var v=f.apply(n[s],arguments);if(!1===v)t[s]=o;else if(v===l)t[s]=l;else if(void 0!==v)return v}}},leave:function(o){for(var s=0;s<n.length;s++)if(null==t[s]){var f=c(n[s],o.kind,!0);if(f){var v=f.apply(n[s],arguments);if(v===l)t[s]=l;else if(void 0!==v&&!1!==v)return v}}else t[s]===o&&(t[s]=null)}}},e.getVisitFn=c,e.BREAK=e.QueryDocumentKeys=void 0;var n,t=(n=r(d[0]))&&n.__esModule?n:{default:n},o=r(d[1]);var s={Name:[],Document:['definitions'],OperationDefinition:['name','variableDefinitions','directives','selectionSet'],VariableDefinition:['variable','type','defaultValue','directives'],Variable:['name'],SelectionSet:['selections'],Field:['alias','name','arguments','directives','selectionSet'],Argument:['name','value'],FragmentSpread:['name','directives'],InlineFragment:['typeCondition','directives','selectionSet'],FragmentDefinition:['name','variableDefinitions','typeCondition','directives','selectionSet'],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:['values'],ObjectValue:['fields'],ObjectField:['name','value'],Directive:['name','arguments'],NamedType:['name'],ListType:['type'],NonNullType:['type'],SchemaDefinition:['description','directives','operationTypes'],OperationTypeDefinition:['type'],ScalarTypeDefinition:['description','name','directives'],ObjectTypeDefinition:['description','name','interfaces','directives','fields'],FieldDefinition:['description','name','arguments','type','directives'],InputValueDefinition:['description','name','type','defaultValue','directives'],InterfaceTypeDefinition:['description','name','interfaces','directives','fields'],UnionTypeDefinition:['description','name','directives','types'],EnumTypeDefinition:['description','name','directives','values'],EnumValueDefinition:['description','name','directives'],InputObjectTypeDefinition:['description','name','directives','fields'],DirectiveDefinition:['description','name','arguments','locations'],SchemaExtension:['directives','operationTypes'],ScalarTypeExtension:['name','directives'],ObjectTypeExtension:['name','interfaces','directives','fields'],InterfaceTypeExtension:['name','interfaces','directives','fields'],UnionTypeExtension:['name','directives','types'],EnumTypeExtension:['name','directives','values'],InputObjectTypeExtension:['name','directives','fields']};e.QueryDocumentKeys=s;var l=Object.freeze({});function c(n,t,o){var s=n[t];if(s){if(!o&&'function'==typeof s)return s;var l=o?s.leave:s.enter;if('function'==typeof l)return l}else{var c=o?n.leave:n.enter;if(c){if('function'==typeof c)return c;var f=c[t];if('function'==typeof f)return f}}}e.BREAK=l}),"13916e",["3c8201","79eeb6"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return(0,n.openSignupOrLoginModal)({authTriggerType:o.AuthTriggerTypes.RECAPTCHA,onFinishedFlow:()=>window.location.reload(),onModalClose:()=>window.location.reload()})};var o=r(d[0]),n=r(d[1])}),"178cf3",["5eb3f8","4798c3"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(u){var f=u.prototype.toJSON;'function'==typeof f||(0,t.default)(0),u.prototype.inspect=f,o.default&&(u.prototype[o.default]=f)};var t=u(r(d[0])),o=u(r(d[1]));function u(t){return t&&t.__esModule?t:{default:t}}}),"1a078f",["85ed97","4cb7dd"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({airlock:o,onSuccess:l,onError:c,error:s}){t.default.emit('airlock:trigger',{airlockObj:o,settings:{},resolve:l,reject:c,error:s,isApiV3:!0})};var t=babelHelpers.interopRequireDefault(r(d[0]))}),"20b3a2",["abc3e4"]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(){const s=r(d[0]);return t=function(){return s},s}Object.defineProperty(e,"__esModule",{value:!0}),e.NiobeMinimalistCache=void 0,e.cacheDeferredResolver=function(t,{key:s,deferrable:o,fetchPolicy:n},c){var h;if(!o)return;if('network-only'===n||'no-cache'===n)return;const l=null===(h=t.get(s))||void 0===h?void 0:h.result;function u(t){return'client-hydration'===c()?new Promise(t=>setTimeout(t,0)).then(()=>u(t)):t}if('server-render'===c())return;if(!l)return;if(!l.deferred)return Promise.resolve(l).then(u);return new Promise(o=>t.watch(s,t=>{t&&o(t)})).then(u)},e.cacheDeferredSentinel=function(t,{key:s,deferrable:o},n){o&&'server-render'===n()&&t.set(s,{data:void 0,deferred:!0},!1)},e.cacheResolver=function(t,{key:s,fetchPolicy:o,deferrable:n,queryRef:c,maxAge:h},l){if(c){if(c.options.deferrable&&('server-render'===l()||'client-hydration'===l()))return;const{result:t}=c;return t&&!t.deferred?{result:t,fromPrefetch:!1}:void 0}if('network-only'===o||'no-cache'===o)return;if('cache-and-network'===o&&'client-hydration'!==l())return;if(n&&('server-render'===l()||'client-hydration'===l()))return;const{result:u,fromPrefetch:f}=t.get(s,{maxAge:h})||{};if('server-render'===l()&&null!=u&&u.deferred)return;return null!=u&&u.deferred?void 0:u?{result:u,fromPrefetch:Boolean(f)}:void 0},e.cacheResult=function(t,{key:s,fetchPolicy:o,variables:n,context:{type:c}={}},h,l){var u,f,v,y;if(h.deferred)return;if('no-cache'===o)return;(!h.error||null!==(u=t.get(s))&&void 0!==u&&null!==(f=u.result)&&void 0!==f&&f.deferred)&&!0!==(null==h||null===(v=h.error)||void 0===v||null===(y=v.extraInfo)||void 0===y?void 0:y.ssrNetworkTimeout)&&t.set(s,h,'prefetch'===c,l,n)};class s{constructor(t){this.key=void 0,this.size=void 0,this.result=void 0,this.variables=void 0,this.normalizedItemsLocators=void 0,this.dependencies=void 0,this.createdAt=void 0,this.fromPrefetch=void 0,this.watchers=void 0,this.key=t,this.watchers=[],this.size=0,this.fromPrefetch=!1}setResult(t,s,o){const n=this.result;this.result=t,this.fromPrefetch=s;const c=void 0===t,h=JSON.stringify(null==t?void 0:t.data),l=h===JSON.stringify(null==n?void 0:n.data);this.size=null!=t&&t.data?h.length:0,this.createdAt=o(),l&&!c||this.notify()}setNormalizedItemsLocators(t){this.normalizedItemsLocators=t}setVariables(t){this.variables=t}setDependencies(t){this.dependencies=t}isCollectable(){return 0===this.watchers.length}watch(t){const s=this;return s.watchers=s.watchers.concat(t),function(){s.watchers=s.watchers.filter(s=>s!==t)}}notify(){const{watchers:t,result:s}=this;this.watchers=[],t.forEach(t=>t(s))}}e.NiobeMinimalistCache=class{constructor({hydrationData:t,metricReporter:s,maxSize:o=1/0}){this.data=void 0,this.size=void 0,this.maxSize=void 0,this.lastTouchedEntry=void 0,this.metricReporter=void 0,this.now=void 0,this.data=new Map,this.size=0,this.maxSize=o,this.metricReporter=s,this.now=s.now,t.forEach(([t,s])=>{this.set(t,s,!1,s.normalizedItemsLocators,s.variables)})}serialize(){return Array.from(this.data.entries()).reduce((t,[s,o])=>{if(null!==o&&void 0!==o.result){const{variables:n,normalizedItemsLocators:c}=o,{data:h,error:l,deferred:u}=o.result;t.push([s,{data:h,error:l,deferred:u,variables:n,normalizedItemsLocators:c}])}return t},[])}get(t,s={}){const{data:o,metricReporter:n,now:c}=this,{maxAge:h}=s,l=o.get(t);if(null===l&&n.increment('frontend.niobe.mini_cache_miss',1,{}),!l)return;const{createdAt:u}=l;return u&&h&&c()-1e3*h>u?void 0:(this.touch(l),l)}set(o,n,c,h,l,u){var f;const{data:v,now:y}=this,w=v.get(o),z=null!=w?w:new s(o),b=n&&(0,t().extractNormalizedItems)(h,n);z.setResult(n,c,y),z.setVariables(l),h&&z.setNormalizedItemsLocators(h),b&&(z.setDependencies(b),u||b.forEach(({key:t,value:s})=>this.set(t,{data:s},!1)),n&&(0,t().watchDependencies)(this,o,n,b,h)),this.touch(z),this.size+=z.size-(null!==(f=null==w?void 0:w.size)&&void 0!==f?f:0),this.prune()}watch(t,o){var n;const{data:c}=this,h=null!==(n=c.get(t))&&void 0!==n?n:new s(t);return c.set(t,h),h.watch(o)}invalidate({keyPrefix:t}){const{data:s}=this;[...s.keys()].filter(s=>s.startsWith(t)).forEach(t=>{this.set(t,void 0,!1)})}clear(){this.data.clear(),this.size=0,this.lastTouchedEntry=void 0}delete(t){const s=this.data.get(t);s&&(this.data.set(t,null),this.size-=s.size)}touch(t){t!==this.lastTouchedEntry&&(this.lastTouchedEntry=t,this.data.delete(t.key),this.data.set(t.key,t))}prune(){for(const[t,s]of this.data){if(this.size<=this.maxSize)break;null!==s&&s.isCollectable()&&this.delete(t)}}}}),"220417",["45e161"]);
__d((function(g,r,i,a,m,e,d){}),"2e3140",[]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}Object.defineProperty(e,"__esModule",{value:!0}),e.abortSignalTransform=function(n){const{signal:o,multiAbortController:l=new(t().MultiAbortController)}=n;o&&l.addSignal(o);return{...n,multiAbortController:l}}}),"308f5e",["871302"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UniversalNiobeResponseEvent=void 0;var n={defaultProps:{schema:'com.airbnb.jitney.event.logging.Universal:UniversalNiobeResponseEvent:1.0.0',event_name:'universal_niobe_response'},propTypes:{}};e.UniversalNiobeResponseEvent=n,n.fullyQualifiedName='Universal.v1.UniversalNiobeResponseEvent'}),"31bc12",[]);
__d((function(g,r,i,a,m,e,d){"use strict";function n(){const t=r(d[0]);return n=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.contextGraphqlTransform=function(o,l,u,f){var p,y,P;const{context:N,operationName:S,operation:R,variables:D}=o,C=`${null!==(E=process)&&void 0!==E&&null!==(L=E.env)&&void 0!==L&&L.NIOBE_ENDPOINT?process.env.NIOBE_ENDPOINT:"/api/v3"}/${S}`,I=(0,s().mergeURLSearchParams)({operationName:S,...b()},null==N?void 0:N.searchParams),T=t.default.get('useViaductNext'),_=t.default.get('layout-init'),A=t.default.get('forceGlobalFlow'),B=T?"https://viaduct-next.d.musta.ch/v3":(0,s().formatUrl)(C,I),F=null!==(p=null==N||null===(y=N.fetchOptions)||void 0===y?void 0:y.method)&&void 0!==p?p:'POST',H=v(C,F,u),x=(0,h().getDocument)(R),X=null!=N&&N.fetchOptions&&'body'in N.fetchOptions?null==N?void 0:N.fetchOptions.body:x&&JSON.stringify({operationName:S,query:(0,n().print)(x),variables:D}),q=null!=N&&N.fetchOptions&&'body'in N.fetchOptions||X?void 0:(0,h().getDocumentPromise)(R).then(t=>JSON.stringify({operationName:S,query:(0,n().print)(t),variables:D}));var E,L;return{...o,fetchUrl:B,context:{...N,searchParams:I,asyncHeaders:H,asyncBody:q,fetchOptions:{...null==N?void 0:N.fetchOptions,body:X,headers:{...l,...null==N?void 0:N.headers,...null==N||null===(P=N.fetchOptions)||void 0===P?void 0:P.headers,...o.headers,...O(X),...!T&&{'X-Airbnb-GraphQL-Platform':'web'},'X-Airbnb-GraphQL-Platform-Client':'minimalist-niobe','X-Niobe-Short-Circuited':'true',..._&&{'X-Client-Version':null==_?void 0:_.appVersionFull},...A&&{'X-AIRBNB-IS-IN-CHINA-FLOW':'F'},...(0,c.isCurrentDomainInChina)()?{[c.chinaPersonalizationHeaderName]:(0,c.loadChinaPersonalizationValueFromLocalStorage)().toString()}:{}}}}}},e.contextRESTTransform=function(n,t,o,l){var u,c,f,h,p,y;const{context:P,url:N}=n,S=(0,s().mergeURLSearchParams)(l?void 0:b(),null==P?void 0:P.searchParams,n.searchParams),R=null!==(u=null!==(c=n.method)&&void 0!==c?c:null==P||null===(f=P.fetchOptions)||void 0===f?void 0:f.method)&&void 0!==u?u:'GET',D=v(N,R,o),C=null!==(h=n.body)&&void 0!==h?h:null==P||null===(p=P.fetchOptions)||void 0===p?void 0:p.body;return{...n,fetchUrl:(0,s().formatUrl)(N,S),context:{...P,wrapWithData:!0,searchParams:S,asyncHeaders:D,fetchOptions:{...null==P?void 0:P.fetchOptions,method:R,body:C,headers:{...O(C),...t,...null==P?void 0:P.headers,...null==P||null===(y=P.fetchOptions)||void 0===y?void 0:y.headers,...n.headers}}}}};var t=babelHelpers.interopRequireDefault(r(d[1])),o=babelHelpers.interopRequireDefault(r(d[2])),l=babelHelpers.interopRequireDefault(r(d[3])),u=babelHelpers.interopRequireDefault(r(d[4])),c=r(d[5]);function s(){const n=r(d[6]);return s=function(){return n},n}function f(){const n=r(d[7]);return f=function(){return n},n}function h(){const n=r(d[8]);return h=function(){return n},n}function p(){const n=r(d[9]);return p=function(){return n},n}function v(n,t,o){const l=(0,f().getRecaptchaPlatformHeaders)(n,t);if(l)return l.then(l=>{if(l)return o.increment('frontend.niobe.recaptcha_v3.append_header',1,{client:'minimalist',endpoint:n,method:t}),l}).catch(n=>{o.increment('frontend.niobe.recaptcha_v3.error',1,{client:'minimalist',status:String(n.statusCode),message:String(n.message)})})}function b(){return{locale:o.default.locale(),...l.default.current().curr?{currency:l.default.current().curr}:{}}}function y(n){return'string'!=typeof n&&null!=n&&('undefined'!=typeof FormData&&n instanceof FormData||'undefined'!=typeof Blob&&n instanceof Blob||n instanceof ArrayBuffer||ArrayBuffer.isView(n)||'undefined'!=typeof ReadableStream&&n instanceof ReadableStream)}function O(n){return{...y(n)?{}:{'Content-Type':'application/json'},'X-Airbnb-API-Key':p().API_KEY,'X-CSRF-Token':(0,u.default)(),'X-CSRF-Without-Token':'1'}}}),"3c3efd",["a8b6d7","0a58da","862e50","06a99e","40eeb7","6d95ce","c08074","fe1d2d","a8e07a","900131"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return u(t,[])};var t,n=(t=r(d[0]))&&t.__esModule?t:{default:t};function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,c){switch(o(t)){case'string':return JSON.stringify(t);case'function':return t.name?"[function ".concat(t.name,"]"):'[function]';case'object':return null===t?'null':(function(t,o){if(-1!==o.indexOf(t))return'[Circular]';var c=[].concat(o,[t]),f=(function(t){var o=t[String(n.default)];if('function'==typeof o)return o;if('function'==typeof t.inspect)return t.inspect})(t);if(void 0!==f){var l=f.call(t);if(l!==t)return'string'==typeof l?l:u(l,c)}else if(Array.isArray(t))return(function(t,n){if(0===t.length)return'[]';if(n.length>2)return'[Array]';for(var o=Math.min(10,t.length),c=t.length-o,f=[],l=0;l<o;++l)f.push(u(t[l],n));1===c?f.push('... 1 more item'):c>1&&f.push("... ".concat(c," more items"));return'['+f.join(', ')+']'})(t,c);return(function(t,n){var o=Object.keys(t);if(0===o.length)return'{}';if(n.length>2)return'['+(function(t){var n=Object.prototype.toString.call(t).replace(/^\[object /,'').replace(/]$/,'');if('Object'===n&&'function'==typeof t.constructor){var o=t.constructor.name;if('string'==typeof o&&''!==o)return o}return n})(t)+']';return'{ '+o.map((function(o){return o+': '+u(t[o],n)})).join(', ')+' }'})(t,c)})(t,c);default:return String(t)}}}),"3c8201",["4cb7dd"]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}function n(){const t=r(d[1]);return n=function(){return t},t}function o(t){return void 0!==t}function s(o,u,c,l){if(0===o.length)return(0,n().deepMergeExceptArrays)(l,c);const[p,...f]=o;return'number'==typeof p?Array.isArray(u)?[...u.slice(0,p),s(f,u[p],c,l),...u.slice(p+1)]:((0,t().warnNiobeError)((0,t().invalidNormalizationPatch)()),u):'string'==typeof p?'object'!=typeof u||!u||Array.isArray(u)?((0,t().warnNiobeError)((0,t().invalidNormalizationPatch)()),u):{...u,[p]:s(f,u[p],c,l)}:void(0,t().warnNiobeError)((0,t().invalidNormalizationPatch)())}Object.defineProperty(e,"__esModule",{value:!0}),e.extractNormalizedItems=function(t,s){return null==t?void 0:t.flatMap(t=>{const{itemsLocation:u,keyPath:c}=t;return u.reduce((t,n)=>{const{responseKey:s,typeCondition:u}=n;return t.flatMap(({value:t,responsePath:n})=>{if(t&&(!t.__typename||u.includes(t.__typename))){const o=t[s];return o?Array.isArray(o)?o.map((t,o)=>({value:t,responsePath:[...n,s,o]})):[{value:o,responsePath:[...n,s]}]:[]}}).filter(o)},[{value:s.data,responsePath:[]}]).map(({responsePath:t,value:o})=>({key:(0,n().computeNormalizedCacheKey)(c,o),value:o,responsePath:t})).filter(({key:t})=>t)})},e.watchDependencies=function(t,n,o,u,c){let l=o,p=!1;const f=null==u?void 0:u.map(({key:o,responsePath:u,value:y})=>t.watch(o,({data:o}={data:void 0})=>{o&&(l={...l,data:s(u,l.data,o,y)},p||(p=!0,Promise.resolve().then(()=>{null==f||f.forEach(t=>t()),t.set(n,l,!1,c,void 0,!0)})))}))}}),"45e161",["8e002d","c08074"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBotDetectionConfigForUrl=void 0;var t=babelHelpers.interopRequireDefault(r(d[0]));e.getBotDetectionConfigForUrl=o=>(t.default.get('botDetectionEndpoints')||[]).find(({endpoint:t})=>o.startsWith(t))||null}),"46fe00",["0a58da"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o='function'==typeof Symbol&&'function'==typeof Symbol.for?Symbol.for('nodejs.util.inspect.custom'):void 0;e.default=o}),"4cb7dd",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.operationRegistryRetrier=function(t,o,u){var l,p;if(null!==(l=u.error)&&void 0!==l&&l.graphQLErrors&&null!==(p=u.error)&&void 0!==p&&p.graphQLErrors.some(({message:t})=>'PersistedQueryNotFound'===t)){var c;const u=null!==(c=o.query)&&void 0!==c?c:o.mutation,l=u&&(0,n().getDocument)(u);if(!u)return;const p=(0,n().getDocumentPromise)(u),y={method:(0,n().isQuery)(u)&&!o.usePOSTForQuery?'GET':'POST',operation_type:s(u),operation_name:o.operationName,client_type:'niobe_minimalist'};return t.increment('frontend.niobe.operation_registry.error',1,{...y,error_type:'GraphQLError',error_name:'PersistedQueryNotFound'}),l?{skipOperationRegistry:!0}:p.then(()=>({skipOperationRegistry:!0}))}},e.operationRegistryTransform=function(u,l){var p,c,y,v;const f=null!==(p=null!==(c=l.query)&&void 0!==c?c:l.mutation)&&void 0!==p?p:l.subscription,_=f&&(0,n().getOperationId)(f),b=s(f),{operationName:h}=l;if(null!==(y=l.context)&&void 0!==y&&y.skipOperationRegistry||!f||!_||t.default.get('useViaductNext'))return u.increment('frontend.niobe.operation_registry.skip',1,{operation_type:b,operation_name:h,client_type:'niobe_minimalist'}),{...l,context:{...l.context,operationId:void 0}};_||u.increment('frontend.niobe.operation_registry.missing_operation_id',1,{operation_type:b,operation_name:h,client_type:'niobe_minimalist'});const O=l,x={...null==O?void 0:O.extensions,persistedQuery:{version:1,sha256Hash:_}};if((0,n().isQuery)(f)&&!O.usePOSTForQuery){var P;const t=(0,o().mergeURLSearchParams)(null==O||null===(P=O.context)||void 0===P?void 0:P.searchParams,{...null!=O&&O.variables?{variables:JSON.stringify(null==O?void 0:O.variables)}:{},extensions:JSON.stringify(x)});var Q;if(!t||t.toString().length<3600)return{...O,context:{...null==O?void 0:O.context,operationId:_,searchParams:t,fetchOptions:{...null==O||null===(Q=O.context)||void 0===Q?void 0:Q.fetchOptions,method:'GET',body:void 0}}}}return{...O,context:{...null==O?void 0:O.context,operationId:_,fetchOptions:{...null==O||null===(v=O.context)||void 0===v?void 0:v.fetchOptions,method:'POST',body:JSON.stringify({operationName:O.operationName,variables:O.variables,extensions:x})}}}};var t=babelHelpers.interopRequireDefault(r(d[0]));function n(){const t=r(d[1]);return n=function(){return t},t}function o(){const t=r(d[2]);return o=function(){return t},t}function s(t){return t?(0,n().isQuery)(t)?'query':'mutation':'unknown'}}),"506238",["0a58da","a8e07a","c08074"]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(){const o=r(d[0]);return t=function(){return o},o}Object.defineProperty(e,"__esModule",{value:!0}),e.NiobeQueryRef=void 0;class o{constructor(t){var o,s;this.options=void 0,this.result=void 0,this.promise=void 0,this.clientType=void 0,this.deferred=void 0,this.taskController=void 0,this.clientType=t.clientType,this.deferred=t.deferred,this.options=t.options,this.promise=t.promise,this.result=null!==(o=t.result)&&void 0!==o?o:null,this.taskController=null===(s=t.options.context)||void 0===s?void 0:s.taskController,this.result||this.promise.then(t=>{this.result=t})}static for(s){const{result:n,promise:l}=s,u=o.memo.get(l),c=n&&o.memo.get(n),p=u||c;if(p){const o=p.clientType===s.clientType,{options:n}=p,{options:l}=s,u=JSON.stringify((0,t().convertToStableObjectOrder)(n))===JSON.stringify((0,t().convertToStableObjectOrder)(l));if(o&&u)return p}const h=new o(s);return o.memo.set(h.promise,h),h.result&&o.memo.set(h.result,h),h.promise.then(t=>o.memo.set(t,h)),h}}e.NiobeQueryRef=o,o.memo=new WeakMap}),"585e21",["7f2d15"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deliverNiobeBotDetection=function(){const o=(0,t.getTreatmentOverride)('niobe_bot_platform_force_in');if((0,n.default)(o))return o;return!0};var t=r(d[0]),n=babelHelpers.interopRequireDefault(r(d[1]))}),"60f717",["f9341a","f30bc0"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ApiOperationType=void 0;e.ApiOperationType={query:1,mutation:2,subscription:3}}),"627d41",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getReplayAirlockHeader=n,e.setReplayAirlockHeaderInContext=function(t,o){return({headers:c={}})=>({headers:{...c,...n(t,o)}})};var t=r(d[0]);function n(n,o){const c=(0,t.getAirlockId)(n);return c||o.increment('frontend.niobe.airlock_unexpected',1,{method:'setReplayAirlockHeader'}),{"X-Airbnb-Replay-Airlock-Id":c}}}),"6984df",["1700a4"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.networkErrorRetrier=function(t,n,o,{context:{networkErrorAttemptsCount:s=1,fetchOptions:u={}}={},operation:p},c){if('mutation'===(null==p?void 0:p.type))return;const l=c.response&&(502===c.response.status||503===c.response.status)||!c.response;if(n&&l&&s<2){var f;t.increment('frontend.niobe.network_retry',1,{status:String(null===(f=c.response)||void 0===f?void 0:f.status),client_type:'niobe_minimalist'});const n=2*o**(1+2*s/10)*Math.random(),p=n<6e3?n:6e3;return new Promise(t=>setTimeout(t,p)).then(()=>({networkErrorAttemptsCount:s+1,fetchOptions:{...u,headers:{...null==u?void 0:u.headers,'x-retry':'true'}}}))}return}}),"6b80b0",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.httpResolver=async function(l,c,p,h,f,w){var E;const{context:y,fetchUrl:v,operationName:b,multiAbortController:{signal:k}}=w,{asyncHeaders:N,asyncBody:x,fetchOptions:O,wrapWithData:S}=y,T=null!==(E=null==O?void 0:O.method)&&void 0!==E?E:'POST',L=f(),Q={...N?await N:{},...null==O?void 0:O.headers,'x-client-request-id':String(L)},C=x?await x:null==O?void 0:O.body,I=l.now(),M=c(v,{...O,body:C,signal:k,headers:Q,method:T});try{const t=await M;null==p||p.postMessage({type:'fetch-did-succeed',url:v}),null==h||h.dispatchEvent((0,n().createFetchSuccessEvent)());const o=l.now(),{headers:c,ok:f,status:E,statusText:y}=t,b=c.has('content-length')?Number(c.get('content-length')):null,k={ok:f,status:E,statusText:y,headers:(0,s().createNiobeHeaders)(c)},N=await t.text(),x=l.now();try{const t=l.now(),n=''===(null==N?void 0:N.trim())&&'rest'===w.type?{}:JSON.parse(N),s=S?{data:n}:n,u=l.now(),{errors:p=[]}=s,h=(function(t,n){if(t>=300){const o=new Error("Received unexpected status code "+t);o.statusCode=t,o.body=n;try{o.result=n&&JSON.parse(n)}catch(t){}return o}return null})(E,N),f=c.get('server-timing'),y={contentLength:b,networkStart:I,networkHeadersEnd:o,networkBodyEnd:x,payloadParseStart:t,payloadParseEnd:u,serverTiming:f};return{...s,response:k,metrics:y,...h||p.length?{error:{name:'GraphQL errors',message:p.map(t=>t.message).join(' '),graphQLErrors:p,networkError:h,extraInfo:null}}:{}}}catch(t){return null==p||p.postMessage({type:'parse-did-fail',url:v}),u("Network error (parse): "+t.message,k,N)}}catch(s){if((0,t.isAbortError)(s))return{data:null,error:{extraInfo:{aborted:!0},graphQLErrors:[],message:s.message,name:s.message,networkError:null}};if(null==p||p.postMessage({type:'fetch-did-fail',url:v}),null==h||h.dispatchEvent((0,n().createFetchFailureEvent)()),'ECONNABORTED'===s.code){const t=(0,o().ssrTimeoutError)(b,s);return(0,o().reportNiobeError)(t),{data:null,error:{extraInfo:{ssrNetworkTimeout:!0},graphQLErrors:[],message:t.message,name:t.message,networkError:t}}}return u("Network error (connection): "+s.message)}};var t=r(d[0]);function n(){const t=r(d[1]);return n=function(){return t},t}function o(){const t=r(d[2]);return o=function(){return t},t}function s(){const t=r(d[3]);return s=function(){return t},t}function u(t,n,o){const s=new Error(o?`${t}. Received body: ${o}`:t);return s.statusCode=null==n?void 0:n.status,s.body=o,{data:null,error:{name:t,message:t,networkError:s,graphQLErrors:[],extraInfo:null},response:n}}}),"74ccbb",["a2c93f","da80b1","8e002d","b167f5"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.skipResolver=function(s){if(s.skip)return t};const t={data:void 0,skip:!0}}),"7534fb",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useRerender=function(){const[,t]=(0,u.useState)({}),c=(0,n.useIsUnmounted)(),s=(0,u.useRef)(!1),o=(0,u.useCallback)((u=!1)=>{c.current||!u&&s.current||(s.current=!0,t({}))},[c]);return s.current=!1,{rerender:o,isRerenderScheduled:s}};var u=r(d[0]),n=r(d[1])}),"7989a6",["a27fc3","d095a9"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isNode=function(t){return null!=t&&'string'==typeof t.kind},e.Token=e.Location=void 0;var t,n=(t=r(d[0]))&&t.__esModule?t:{default:t};var o=(function(){function t(t,n,o){this.start=t.start,this.end=n.end,this.startToken=t,this.endToken=n,this.source=o}return t.prototype.toJSON=function(){return{start:this.start,end:this.end}},t})();e.Location=o,(0,n.default)(o);var s=(function(){function t(t,n,o,s,u,h,l){this.kind=t,this.start=n,this.end=o,this.line=s,this.column=u,this.value=l,this.prev=h,this.next=null}return t.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},t})();e.Token=s,(0,n.default)(s)}),"79eeb6",["1a078f"]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}function n(){const t=r(d[1]);return n=function(){return t},t}function o(){const t=r(d[2]);return o=function(){return t},t}function s(){const t=r(d[3]);return s=function(){return t},t}function c(){const t=r(d[4]);return c=function(){return t},t}Object.defineProperty(e,"__esModule",{value:!0}),e.metricsTransform=function(t,n,o){var s;return{...t,context:{...t.context,startTime:n(),eventId:null!==(s=o())&&void 0!==s?s:''}}},e.reportAPIResponseMetrics=function(t,n,_,p){var l,u,h,v,f,y;const{fetchUrl:w,type:b}=p,k=null!==(l=null==p||null===(u=p.context)||void 0===u||null===(h=u.fetchOptions)||void 0===h?void 0:h.method)&&void 0!==l?l:'POST';let E,T;if(_.metrics){const{networkStart:t,networkBodyEnd:n,contentLength:o,serverTiming:s}=_.metrics;E={response_over_the_wire_size:null!=o?o:void 0,response_time_ms:Math.floor(n-t),server_timing:null!=s?s:void 0}}'graphql'===b&&(T=3);'rest'===b&&(T=2);let x='http://unknown';var P;void 0!==window.location&&(x=null!==(P=window.location.origin)&&void 0!==P?P:x);const{host:q,pathname:C}=new URL(w,x);t({schema:o().UniversalApiResponseEvent,event_data:{event_id:n,http_status_code:null!==(v=null===(f=_.response)||void 0===f?void 0:f.status)&&void 0!==v?v:0,http_method:s().HttpMethodType[k.charAt(0).toUpperCase()+k.slice(1).toLowerCase()],domain_and_path:`${x}${C}`,host:q,path:C,error_code:null===(y=_.error)||void 0===y?void 0:y.name,api_protocol:T,api_client_key:c().API_KEY,...E}})},e.reportMetrics=function(o,s,c,_,p,l){'rest'!==c.type&&(function(o,s,c,_,p){var l,u,h;const{floor:v}=Math;if('cache'!==_&&'cache-prefetch'!==_&&'network'!==_)return;const{operationName:f,operationType:y,context:{eventId:w,startTime:b},fetchPolicy:k}=s;const E=Boolean(c.error),T=_.startsWith('cache'),x='cache-prefetch'===_;o({schema:t().UniversalNiobeResponseEvent,event_data:{event_id:w,operation_name:f,operation_type:n().ApiOperationType[y],has_error:E,request_event_ids:null!==(l=null===(u=c.metrics)||void 0===u?void 0:u.requestEventIds)&&void 0!==l?l:[],request_strategy:k,...(function(){const t=v(p-b),n={total_response_latency_ms:t,total_latency_ms:t,first_response_latency_ms:t},{metrics:o}=c;if(!o)return{...n,niobe_client_overhead_ms:t};const{networkStart:s,networkBodyEnd:l,payloadParseStart:u,payloadParseEnd:h,contentLength:f}=o;if('cache'===_||'cache-prefetch'===_)return{...n,niobe_client_overhead_ms:t,cache_response_byte_size:f||void 0};const y=v(l-s),w=v(h-u),k=v(t-y);return{...n,network_deserialization_latency_ms:w,network_request_latency_ms:y,network_load_latency_ms:y,network_response_byte_size:f||void 0,cache_response_byte_size:f||void 0,niobe_client_overhead_ms:k}})(),operation_id:null===(h=s.operation)||void 0===h?void 0:h.operationId,cache_type:T?2:void 0,cached_data_is_exact_match:T,cached_data_is_from_prefetch:x,had_cached_data:T,number_of_server_errors:E?1:0,fetch_priority:'prefetch'===s.context.type?2:1}})})(s,c,_,p,l);'network'===p&&(function(t,{operationName:n,operationType:o,type:s,context:{fetchOptions:{body:c,headers:_,method:p}}},{error:l}){var u;const h={type:s,method:p,operation_type:o,operation_name:n,result:l?'error':'success',content_type:_['Content-Type'],body_type:null!=c?(null===(u=c.constructor)||void 0===u?void 0:u.name)||'unknown':'undefined',client_type:'niobe_minimalist'};t.increment('frontend.niobe.api_request',1,h)})(o,c,_);!(function(t,n,o){if(o.error){const{networkError:_,graphQLErrors:p}=o.error;let l={type:n.type,operation_name:n.operationName,client_type:'niobe_minimalist'};if(_)l={...l,error_type:'NetworkError',error_name:_.name,status_code:_.statusCode?String(_.statusCode):void 0};else if(p&&p.length){var s,c;l={...l,error_type:'GraphQLError',error_name:p[0].name,error_status_code:String(null===(s=p[0].extensions)||void 0===s||null===(c=s.response)||void 0===c?void 0:c.statusCode)}}t.increment('frontend.niobe.error',1,l)}})(o,c,_)}}),"7e9feb",["31bc12","627d41","8e84bb","397ad2","900131"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.convertToStableObjectOrder=function t(o){if(Array.isArray(o))return o.map(o=>t(o));if('object'==typeof o&&null!==o){const n=o;return'function'==typeof n.toJSON?t(n.toJSON()):Object.keys(o).sort().reduce((n,c)=>(n[c]=t(o[c]),n),{})}return o}}),"7f2d15",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n,t){if(!Boolean(n))throw new Error(null!=t?t:'Unexpected invariant triggered.')}}),"85ed97",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiAbortController=void 0;e.MultiAbortController=class{constructor(){this.aborted=!1,this.coalescedAbortController=new AbortController,this.nonAbortedSignals=new Set,this.signal=this.coalescedAbortController.signal}addSignal(t){this.nonAbortedSignals.add(t),t.addEventListener('abort',()=>{this.nonAbortedSignals.delete(t),0===this.nonAbortedSignals.size&&(this.coalescedAbortController.abort(),this.aborted=!0)},{signal:this.coalescedAbortController.signal})}addSufficientSignal(t){t.addEventListener('abort',()=>{this.nonAbortedSignals.clear(),this.coalescedAbortController.abort()},{signal:this.coalescedAbortController.signal})}}}),"871302",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractGraphqlAirlockError=function(t){return null==t?void 0:t.map(o).map(n.extractAirlockData).find(l)},e.getGraphQLGhostingAppealUri=function(n){return u(n.errors)},e.getMinimalistGraphQLGhostingAppealUri=function(n){var t;return u(null===(t=n.error)||void 0===t?void 0:t.graphQLErrors)},e.redirectToAirlock=function(n){window.location.href=n};babelHelpers.interopRequireDefault(r(d[0]));var n=r(d[1]),t=babelHelpers.interopRequireDefault(r(d[2]));function o(n){var t,o;return null===(t=n.extensions)||void 0===t||null===(o=t.response)||void 0===o?void 0:o.body}function l(n){return null!=n}function u(n){if(n)return n.map(o).map(t.default).find(l)}}),"88ca6d",["cfeceb","1700a4","b1cb64"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=r(d[0]);Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===t[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}}))}))}),"8a9601",["2e3140"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UniversalApiResponseEvent=void 0;var n={defaultProps:{schema:'com.airbnb.jitney.event.logging.Universal:UniversalApiResponseEvent:3.0.0',event_name:'universal_api_response'},propTypes:{}};e.UniversalApiResponseEvent=n,n.fullyQualifiedName='Universal.v3.UniversalApiResponseEvent'}),"8e84bb",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.maybeGetRecaptchaV3TokenHeader=void 0;var t=babelHelpers.interopRequireDefault(r(d[0])),o=r(d[1]),n=r(d[2]),s=r(d[3]);const u=()=>{};e.maybeGetRecaptchaV3TokenHeader=(c,l,p,h=!1)=>{var f;const v=(0,s.getBotDetectionConfigForUrl)(c);if(null===v)return u;if(!v.methods.map(t=>t.toUpperCase()).includes(l.toUpperCase()))return u;if(t.default.getBootstrap('trust_ai_disable_recaptchav3'))return u;if(h)return u;const _={action:v.actionName||(0,n.getNotSetEndpointActionName)(null===(f=v.endpoint)||void 0===f?void 0:f.slice(1)),...v.timeout&&{timeoutInMs:v.timeout},...v.shouldThrow&&{shouldThrow:v.shouldThrow},...v.retries&&{maxRetries:v.retries},isPlatformized:p};return()=>(0,o.getRecaptchaV3TokenHeader)(_)}}),"913737",["c235f8","fa27ff","336c95","46fe00"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clearInflightQuery=function(t,o){'dedupe-inflight'===o.dedupePolicy&&t.delete(o.key)},e.inflightQueryResolver=function(t,o){const{multiAbortController:l}=o;if('dedupe-inflight'===o.dedupePolicy){const n=t.get(o.key);if(!n)return;const{promise:u,multiAbortController:c}=n;return c.addSignal(l.signal),u}},e.storeInflightQuery=function(t,o,l){const{multiAbortController:n,dedupePolicy:u,key:c}=o;'dedupe-inflight'!==u||t.has(c)||t.set(o.key,{promise:l,multiAbortController:n})}}),"92bfea",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.print=function(t){return(0,n.visit)(t,{leave:u})};var n=r(d[0]),t=r(d[1]);var u={Name:function(n){return n.value},Variable:function(n){return'$'+n.name},Document:function(n){return c(n.definitions,'\n\n')+'\n'},OperationDefinition:function(n){var t=n.operation,u=n.name,o=l('(',c(n.variableDefinitions,', '),')'),f=c(n.directives,' '),s=n.selectionSet;return u||f||o||'query'!==t?c([t,c([u,o]),f,s],' '):s},VariableDefinition:function(n){var t=n.variable,u=n.type,o=n.defaultValue,f=n.directives;return t+': '+u+l(' = ',o)+l(' ',c(f,' '))},SelectionSet:function(n){return f(n.selections)},Field:function(n){var t=n.alias,u=n.name,o=n.arguments,f=n.directives,v=n.selectionSet,p=l('',t,': ')+u,y=p+l('(',c(o,', '),')');return y.length>80&&(y=p+l('(\n',s(c(o,'\n')),'\n)')),c([y,c(f,' '),v],' ')},Argument:function(n){return n.name+': '+n.value},FragmentSpread:function(n){return'...'+n.name+l(' ',c(n.directives,' '))},InlineFragment:function(n){var t=n.typeCondition,u=n.directives,o=n.selectionSet;return c(['...',l('on ',t),c(u,' '),o],' ')},FragmentDefinition:function(n){var t=n.name,u=n.typeCondition,o=n.variableDefinitions,f=n.directives,s=n.selectionSet;return"fragment ".concat(t).concat(l('(',c(o,', '),')')," ")+"on ".concat(u," ").concat(l('',c(f,' '),' '))+s},IntValue:function(n){return n.value},FloatValue:function(n){return n.value},StringValue:function(n,u){var o=n.value;return n.block?(0,t.printBlockString)(o,'description'===u?'':'  '):JSON.stringify(o)},BooleanValue:function(n){return n.value?'true':'false'},NullValue:function(){return'null'},EnumValue:function(n){return n.value},ListValue:function(n){return'['+c(n.values,', ')+']'},ObjectValue:function(n){return'{'+c(n.fields,', ')+'}'},ObjectField:function(n){return n.name+': '+n.value},Directive:function(n){return'@'+n.name+l('(',c(n.arguments,', '),')')},NamedType:function(n){return n.name},ListType:function(n){return'['+n.type+']'},NonNullType:function(n){return n.type+'!'},SchemaDefinition:o((function(n){var t=n.directives,u=n.operationTypes;return c(['schema',c(t,' '),f(u)],' ')})),OperationTypeDefinition:function(n){return n.operation+': '+n.type},ScalarTypeDefinition:o((function(n){return c(['scalar',n.name,c(n.directives,' ')],' ')})),ObjectTypeDefinition:o((function(n){var t=n.name,u=n.interfaces,o=n.directives,s=n.fields;return c(['type',t,l('implements ',c(u,' & ')),c(o,' '),f(s)],' ')})),FieldDefinition:o((function(n){var t=n.name,u=n.arguments,o=n.type,f=n.directives;return t+(p(u)?l('(\n',s(c(u,'\n')),'\n)'):l('(',c(u,', '),')'))+': '+o+l(' ',c(f,' '))})),InputValueDefinition:o((function(n){var t=n.name,u=n.type,o=n.defaultValue,f=n.directives;return c([t+': '+u,l('= ',o),c(f,' ')],' ')})),InterfaceTypeDefinition:o((function(n){var t=n.name,u=n.interfaces,o=n.directives,s=n.fields;return c(['interface',t,l('implements ',c(u,' & ')),c(o,' '),f(s)],' ')})),UnionTypeDefinition:o((function(n){var t=n.name,u=n.directives,o=n.types;return c(['union',t,c(u,' '),o&&0!==o.length?'= '+c(o,' | '):''],' ')})),EnumTypeDefinition:o((function(n){var t=n.name,u=n.directives,o=n.values;return c(['enum',t,c(u,' '),f(o)],' ')})),EnumValueDefinition:o((function(n){return c([n.name,c(n.directives,' ')],' ')})),InputObjectTypeDefinition:o((function(n){var t=n.name,u=n.directives,o=n.fields;return c(['input',t,c(u,' '),f(o)],' ')})),DirectiveDefinition:o((function(n){var t=n.name,u=n.arguments,o=n.repeatable,f=n.locations;return'directive @'+t+(p(u)?l('(\n',s(c(u,'\n')),'\n)'):l('(',c(u,', '),')'))+(o?' repeatable':'')+' on '+c(f,' | ')})),SchemaExtension:function(n){var t=n.directives,u=n.operationTypes;return c(['extend schema',c(t,' '),f(u)],' ')},ScalarTypeExtension:function(n){return c(['extend scalar',n.name,c(n.directives,' ')],' ')},ObjectTypeExtension:function(n){var t=n.name,u=n.interfaces,o=n.directives,s=n.fields;return c(['extend type',t,l('implements ',c(u,' & ')),c(o,' '),f(s)],' ')},InterfaceTypeExtension:function(n){var t=n.name,u=n.interfaces,o=n.directives,s=n.fields;return c(['extend interface',t,l('implements ',c(u,' & ')),c(o,' '),f(s)],' ')},UnionTypeExtension:function(n){var t=n.name,u=n.directives,o=n.types;return c(['extend union',t,c(u,' '),o&&0!==o.length?'= '+c(o,' | '):''],' ')},EnumTypeExtension:function(n){var t=n.name,u=n.directives,o=n.values;return c(['extend enum',t,c(u,' '),f(o)],' ')},InputObjectTypeExtension:function(n){var t=n.name,u=n.directives,o=n.fields;return c(['extend input',t,c(u,' '),f(o)],' ')}};function o(n){return function(t){return c([t.description,n(t)],'\n')}}function c(n){var t,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:'';return null!==(t=null==n?void 0:n.filter((function(n){return n})).join(u))&&void 0!==t?t:''}function f(n){return l('{\n',s(c(n,'\n')),'\n}')}function l(n,t){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'';return null!=t&&''!==t?n+t+u:''}function s(n){return l('  ',n.replace(/\n/g,'\n  '))}function v(n){return-1!==n.indexOf('\n')}function p(n){return null!=n&&n.some(v)}}),"a8b6d7",["13916e","b8f1b4"]);
__d((function(g,r,i,a,m,e,d){"use strict";function n(n){return'OperationDefinition'===n.kind}function t(n){return'OperationDefinition'===n.kind&&'mutation'===n.operation}function o(n){return!n.definitions.some(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.definitionIsMutation=t,e.documentIsQuery=o,e.getDocument=function(n){if('getDocument'in n)return n.document;return n},e.getDocumentPromise=async function(n){if('getDocument'in n){const t=await n.getDocument();return n.document=t,t}return n},e.getNormalizedItemsLocators=function(n){return'normalizedItemsLocators'in n?n.normalizedItemsLocators:void 0},e.getOperationId=function(n){return n.operationId},e.getOperationName=function(t){var o;if('getDocument'in t)return t.name;const u=t.definitions.find(n);return null==u||null===(o=u.name)||void 0===o?void 0:o.value},e.isQuery=function(n){if('getDocument'in n)return'query'===n.type;return o(n)}}),"a8e07a",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createNiobeHeaders=function(t){return{get:o=>(n('get',o),t.get(o)),has:o=>(n('has',o),t.has(o)),toJSON:()=>{}}};var t=r(d[0]);function n(n,o){(0,t.airdogCount)('frontend.niobe.response_headers',1,{action:n,header:o})}}),"b167f5",["3e4681"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(l){var n,u;return null!==(n=null==l||null===(u=l.ghostingAppeal)||void 0===u?void 0:u.redirectUri)&&void 0!==n?n:null}}),"b1cb64",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getOptionsToRESTOptions=function(o){return{type:'rest',body:void 0,context:{},deferrable:!1,errorPolicy:'all',fetchPolicy:'cache-first',dedupePolicy:'GET'===o.method||void 0===o.method?'dedupe-inflight':'no-dedupe',headers:{},method:'GET',skip:!1,queryRef:void 0,...o}},e.mutationToOperationOptions=function(o){return{type:'graphql',operation:o.mutation,variables:void 0,fetchPolicy:'network-only',errorPolicy:'all',dedupePolicy:'no-dedupe',usePOSTForQuery:!1,context:{},skip:!1,notifyOnNetworkStatusChange:!1,queryRef:void 0,deferrable:!1,headers:{},...o}},e.queryToOperationOptions=function(o){return{type:'graphql',operation:o.query,variables:void 0,fetchPolicy:'cache-first',errorPolicy:'all',dedupePolicy:'dedupe-inflight',usePOSTForQuery:!1,context:{},skip:!1,notifyOnNetworkStatusChange:!1,deferrable:!1,headers:{},...o,queryRef:void 0}},e.subscriptionToOperationOptions=function(o){return{type:'graphql',operation:o.subscription,fetchPolicy:'network-only',errorPolicy:'all',dedupePolicy:'no-dedupe',usePOSTForQuery:!1,context:{},skip:!1,notifyOnNetworkStatusChange:!1,queryRef:void 0,deferrable:!1,headers:{},...o}}}),"b6122a",[]);
__d((function(g,r,i,a,m,e,d){"use strict";function n(n){for(var t=0;t<n.length;++t)if(' '!==n[t]&&'\t'!==n[t])return!1;return!0}function t(n){for(var t,l=!0,o=!0,c=0,u=null,f=0;f<n.length;++f)switch(n.charCodeAt(f)){case 13:10===n.charCodeAt(f+1)&&++f;case 10:l=!1,o=!0,c=0;break;case 9:case 32:++c;break;default:o&&!l&&(null===u||c<u)&&(u=c),o=!1}return null!==(t=u)&&void 0!==t?t:0}Object.defineProperty(e,"__esModule",{value:!0}),e.dedentBlockStringValue=function(l){var o=l.split(/\r\n|[\n\r]/g),c=t(l);if(0!==c)for(var u=1;u<o.length;u++)o[u]=o[u].slice(c);var f=0;for(;f<o.length&&n(o[f]);)++f;var h=o.length;for(;h>f&&n(o[h-1]);)--h;return o.slice(f,h).join('\n')},e.getBlockStringIndentation=t,e.printBlockString=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:'',l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=-1===n.indexOf('\n'),c=' '===n[0]||'\t'===n[0],u='"'===n[n.length-1],f='\\'===n[n.length-1],h=!o||u||f||l,s='';!h||o&&c||(s+='\n'+t);s+=t?n.replace(/\n/g,'\n'+t):n,h&&(s+='\n');return'"""'+s.replace(/"""/g,'\\"""')+'"""'}}),"b8f1b4",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.computeNormalizedCacheKey=function(t,n){return`${n.__typename}.${t.join('.')}:${t.reduce((t,n)=>null==t?void 0:t[n],n)}`},e.deepMergeExceptArrays=function t(n,c){if(n&&c&&'object'==typeof n&&'object'==typeof c&&!Array.isArray(n)&&!Array.isArray(c))return Object.fromEntries([...Object.entries(n),...Object.entries(c).map(([c,s])=>[c,t(n[c],s)])]);return c},e.formatUrl=function(t,n){const c=new URL(t,t.startsWith('http')?void 0:"https://__example__.com");n&&new URLSearchParams(n).forEach((t,n)=>c.searchParams.append(n,t));const s=c.toString();return s.startsWith("https://__example__.com")?s.slice("https://__example__.com".length):s},e.mergeURLSearchParams=function(...t){const n=t.filter(Boolean);return n.length?1===n.length?new URLSearchParams(n[0]):new URLSearchParams(n.flatMap(t=>t instanceof URLSearchParams?[...t.entries()]:Array.isArray(t)?t:[...new URLSearchParams(t).entries()])):void 0}}),"c08074",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useIsUnmounted=function(){const u=(0,t.useRef)(!1);return(0,t.useEffect)(()=>()=>{u.current=!0},[]),u};var t=r(d[0])}),"d095a9",["a27fc3"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t={NiobeMinimalistClient:!0};e.default=e.NiobeMinimalistClient=void 0;var n=r(d[0]),o=r(d[1]),s=babelHelpers.interopRequireDefault(r(d[2])),u=r(d[3]),c=r(d[4]);function l(){const t=r(d[5]);return l=function(){return t},t}function h(){const t=r(d[6]);return h=function(){return t},t}function p(){const t=r(d[7]);return p=function(){return t},t}function f(){const t=r(d[8]);return f=function(){return t},t}function v(){const t=r(d[9]);return v=function(){return t},t}function y(){const t=r(d[10]);return y=function(){return t},t}function b(){const t=r(d[11]);return b=function(){return t},t}function R(){const t=r(d[12]);return R=function(){return t},t}function w(){const t=r(d[13]);return w=function(){return t},t}function S(){const t=r(d[14]);return S=function(){return t},t}function O(){const t=r(d[15]);return O=function(){return t},t}function k(){const t=babelHelpers.interopRequireDefault(r(d[16]));return k=function(){return t},t}function x(){const t=r(d[17]);return x=function(){return t},t}function M(){const t=r(d[18]);return M=function(){return t},t}function Q(){const t=r(d[19]);return Q=function(){return t},t}function T(){const t=r(d[20]);return T=function(){return t},t}function E(){const t=r(d[21]);return E=function(){return t},t}function C(){const t=r(d[22]);return C=function(){return t},t}function q(){const t=r(d[23]);return q=function(){return t},t}function P(){const t=r(d[24]);return P=function(){return t},t}function A(){const t=r(d[25]);return A=function(){return t},t}var D=r(d[26]);Object.keys(D).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===D[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return D[n]}}))}));const L=requestIdleCallback;class I{constructor({data:t=[],fetch:n,generateRandomString:o,wrapResultData:s,metricReporter:u,jitneyLogger:c,cacheMaxSize:l=8388608,cache:h=new(R().NiobeMinimalistCache)({hydrationData:t,maxSize:l,metricReporter:u}),inflight:p=new Map,retryOnNetworkError:f=!0,retryDelay:v=300,extraHeaders:y={},disablePrepare:b=!1,getRenderingState:w,apiGatewayURL:S,fetchStatusMessageTarget:O,debugPort:k,webSocketClient:x,synchronousResolver:M}){this.type='minimalist',this.cache=void 0,this.inflight=void 0,this.metricReporter=void 0,this.jitneyLogger=void 0,this.fetch=void 0,this.generateRandomString=void 0,this.getRenderingState=void 0,this.retryOnNetworkError=void 0,this.retryDelay=void 0,this.extraHeaders=void 0,this.disablePrepare=void 0,this.apiGatewayURL=void 0,this.webSocketClient=void 0,this.transformedOptions=void 0,this.synchronousResolver=void 0,this.wrapResultData=void 0,this.fetchStatusMessageTarget=void 0,this.wrappedData=void 0,this.debugPort=void 0,this.webSocketMultiAbortController=void 0,this.webSocketSubscription=void 0,this.cache=h,this.inflight=p,this.retryOnNetworkError=f,this.retryDelay=v,this.getRenderingState=w,this.metricReporter=u,this.jitneyLogger=c,this.extraHeaders=y,this.disablePrepare=b,this.fetch=n,this.generateRandomString=o,this.apiGatewayURL=S||'',this.wrapResultData=s,this.wrappedData=new WeakMap,this.transformedOptions=new WeakMap,this.webSocketClient=x,this.synchronousResolver=M,this.debugPort=k,this.fetchStatusMessageTarget=O,this.watchDebugPort(k),this.metricReporter.increment('niobe_client_type',1,{clientType:'minimalist'})}preloadQuery(t){const n=(0,p().queryToOperationOptions)(t);return this.execute(n)}preloadRestQuery(t){return this.execute((0,p().getOptionsToRESTOptions)(t))}async query(t){var n,o,s;const u=(0,p().queryToOperationOptions)(t);null===(n=this.debugPort)||void 0===n||n.postMessage({type:'query-start',operationName:u.operation.name});const c=await this.execute(u).promise;if(null===(o=this.debugPort)||void 0===o||o.postMessage({type:'query-end',operationName:u.operation.name}),null!==(s=c.error)&&void 0!==s&&s.networkError)throw c.error.networkError;return c}async prefetchQuery(t){const n=(0,p().queryToOperationOptions)(t);return this.execute({...n,context:{type:'prefetch',...n.context,headers:{'x-airbnb-prefetch':'true',...n.context.headers},fetchOptions:{...n.context.fetchOptions,type:'prefetch'}}}).promise}readQuery(t){var n,o,s,u;const{getRenderingState:c}=this;return t.queryRef&&t.queryRef.options.deferrable&&('server-render'===c()||'client-hydration'===c())?null:t.queryRef&&!t.queryRef.options.deferrable?null!==(n=null===(o=t.queryRef.result)||void 0===o?void 0:o.data)&&void 0!==n?n:null:null!==(s=null===(u=this.readResult((0,p().queryToOperationOptions)(t)))||void 0===u?void 0:u.data)&&void 0!==s?s:null}writeQuery(t){const n=this.transformOptions((0,p().queryToOperationOptions)(t)),o={data:t.data},s=f().NiobeQueryRef.for({options:(0,p().queryToOperationOptions)(t),promise:Promise.resolve(o),result:o,clientType:this}),{promise:u}=s;this.processResult({transformedOptions:n,result:o,promise:u,source:'manual'})}readItem({typename:t,keyField:n,id:o}){var s,u,c;const{cache:l}=this,h=`${t}.${n}:${o}`;return null!==(s=null===(u=l.get(h))||void 0===u||null===(c=u.result)||void 0===c?void 0:c.data)&&void 0!==s?s:null}writeItem({typename:t,keyField:n,id:o,data:s}){var u;const{cache:c}=this,l=`${t}.${n}:${o}`,h=c.get(l);this.cache.set(l,{...h,data:(0,C().deepMergeExceptArrays)(null==h||null===(u=h.result)||void 0===u?void 0:u.data,s)},!1)}async mutate(t){const n=await this.execute((0,p().mutationToOperationOptions)(t)).promise;if(n.error){var o,s,u;if(n.error.networkError)throw null===(o=n.error)||void 0===o?void 0:o.networkError;if((null===(s=n.error)||void 0===s||null===(u=s.graphQLErrors)||void 0===u?void 0:u.length)>0){var c,l;const t=new Error(null===(c=n.error)||void 0===c||null===(l=c.graphQLErrors)||void 0===l?void 0:l.map(t=>t.message).join('\n'));throw t.graphQLErrors=n.error.graphQLErrors,t}}return n}createWebSocketSubscription(t){var n;const{webSocketClient:o}=this;if(!o)throw new Error('no websocket client');var s;if(this.webSocketSubscription&&(null===(n=this.webSocketMultiAbortController)||void 0===n||!n.aborted))return null===(s=this.webSocketMultiAbortController)||void 0===s||s.addSignal(t),this.webSocketSubscription;this.webSocketMultiAbortController=new(q().MultiAbortController),this.webSocketMultiAbortController.addSignal(t);const u=o.subscribe('graphql_subscription',this.webSocketMultiAbortController.signal),c=t=>{var n;'disconnected'!==t.state?(this.webSocketSubscription=t,null===(n=t.next)||void 0===n||n.then(c)):this.webSocketSubscription=void 0};return c(u),u}async initiateGraphQLSubscription(t,n){var o,s;const u=await this.execute((0,p().subscriptionToOperationOptions)({...t,headers:{'x-airbnb-websocket-connection-id':n}})).promise,c=null===(o=u.extensions)||void 0===o||null===(s=o.subscription)||void 0===s?void 0:s.subscriptionId;if(!c)throw new Error('Subscription ID not returned from subscription result');return{subscriptionId:c,result:u,error:void 0}}async*subscribe(t,n,o){if(o&&await new Promise(t=>{setTimeout(t,o)}),n.aborted)return;let s=this.createWebSocketSubscription(n);for(yield{state:'pending'};'pending'===s.state||'reconnecting'===s.state;)s=await s.next;if('disconnected'===s.state){const{sourceError:t}=s,{wasClean:n,code:o,reason:u}=t;return void(n?yield{state:'disconnected'}:yield{state:'error',error:new Error(`${o} - ${u}`)})}const{connection:u}=s,c=this.initiateGraphQLSubscription(t,u.connectionId),{result:h,subscriptionId:p,error:f}=await c.catch(t=>({subscriptionId:void 0,result:void 0,error:t}));if(void 0===p)return void(yield{state:'error',error:f});h&&h.data?yield{state:'message',data:h}:yield{state:'established'};const y=()=>this.mutate({mutation:l().UnsubscribeMutationOperation,variables:{subscriptionId:p}}).catch(()=>{this.metricReporter.increment('frontend.niobe.unsubscribe_failure',1,{subscription_name:t.subscription.name})});function b(t){var n,o;return(null===(n=t.extensions)||void 0===n||null===(o=n.subscription)||void 0===o?void 0:o.subscriptionId)===p}for(n.addEventListener('abort',y,{once:!0}),s=await s.next;s;){if('established'===s.state)yield{state:'established'};else if('reconnecting'===s.state)yield{state:'reconnecting'};else if('disconnected'===s.state){const{sourceError:t}=s,{wasClean:n,code:o,reason:u}=t;n?yield{state:'disconnected'}:yield{state:'error',error:new Error(`${o} - ${u}`)}}else if('message'===s.state){const{message:t}=s;try{const n=JSON.parse(t);b(n)&&(yield{state:'message',data:n})}catch(n){(0,v().warnNiobeError)((0,v().unparseableSubscriptionMessage)(t))}}s=await s.next}s||n.aborted||(y(),yield{state:'resubscribing'},yield*this.subscribe(t,n,Math.min(3e4,o?2*o:100)))}extract(){return this.cache.serialize()}invalidate({query:t,variables:n}){const{cache:o}=this,s=(0,b().computeOperationCacheKey)({operationName:t.name,variables:n});o.invalidate({keyPrefix:s})}updateCache(t){t.forEach(([t,n])=>{(0,R().cacheResult)(this.cache,{key:t},n)})}wrapResult(t){if(t&&t.data&&this.wrapResultData){if(this.wrappedData.has(t))return this.wrappedData.get(t);const n={...t,data:this.wrapResultData(t.data)};return this.wrappedData.set(t,n),n}return t}readResult(t){const{queryRef:{clientType:n}={}}=t,{getRenderingState:o}=this;if(n&&n!==this&&(0,v().throwNiobeError)((0,v().receivedQueryRefForWrongClient)(this,n)),t.queryRef){var s,u;if(t.queryRef.deferred&&('server-render'===o()||'client-hydration'===o()))return;const n=this.transformOptions(t.queryRef.options),[,c]=this.syncResolve(n)||[];return this.wrapResult(null!==(s=null!=c?c:null===(u=t.queryRef)||void 0===u?void 0:u.result)&&void 0!==s?s:void 0)}const c=this.transformOptions(t),[,l]=this.syncResolve(c)||[];return this.wrapResult(l)}watchOnce(t,n){const{options:o}=t;return this.cache.watch(this.transformOptions(o).key,t=>{const s=t?f().NiobeQueryRef.for({promise:Promise.resolve(t),result:t,clientType:this,options:o,deferred:t.deferred}):this.execute(o);n(s)})}executeFrom({queryRef:t,options:n}){const{options:o}=t;return this.execute({...o,...n,variables:{...o.variables,...n.variables}})}transformOptions(t){const{metricReporter:n,metricReporter:{now:o},extraHeaders:s,apiGatewayURL:u,generateRandomString:c}=this;const l=this.transformedOptions.get(t);if(l)return l;const h=(function(){if('rest'===t.type){const u=(0,A().timeoutSignalTransform)((0,P().abortSignalTransform)((0,w().metricsTransform)(t,o,c))),l=(0,M().contextRESTTransform)(u,s,n,t.excludeLocaleAndCurrencySearchParams);return(0,b().identifyRESTTransform)(l)}const l=(0,A().timeoutSignalTransform)((0,P().abortSignalTransform)((0,w().metricsTransform)(t,o,c))),h=(0,b().identifyGraphQLTransform)(l),p=(0,O().operationRegistryTransform)(n,h);return(0,M().contextGraphqlTransform)(p,s,n,u)})();return this.transformedOptions.set(t,h),h}syncResolve(t){var n;const{cache:o}=this,s=(0,R().cacheResolver)(o,t,this.getRenderingState);if(s)return[s.fromPrefetch?'cache-prefetch':'cache',s.result];const u=(0,y().skipResolver)(t);if(u)return['skip',u];const c=null===(n=this.synchronousResolver)||void 0===n?void 0:n.call(this,t);return c?['injected-sync-resolve',c]:void 0}asyncResolve(t,n){var o;const{inflight:s,cache:u,fetch:c,metricReporter:l,jitneyLogger:h,getRenderingState:p,generateRandomString:f,debugPort:v,fetchStatusMessageTarget:y}=this,b=[],O=t=>(0,T().httpResolver)(l,c,v,y,f,t).then(o=>{const s=f();return b.push(null!=s?s:''),L(()=>{(0,w().reportAPIResponseMetrics)(h,null!=s?s:'',o,t)}),o.metrics&&(o.metrics.requestEventIds=b),this.retry(n,t,o,O)}),k=null===(o=(0,S().inflightQueryResolver)(s,t))||void 0===o?void 0:o.then(n=>{var o,s;return null!==(o=n.error)&&void 0!==o&&null!==(s=o.extraInfo)&&void 0!==s&&s.aborted&&!t.multiAbortController.aborted?O(t):n});if(k)return['network-dedupe',k];const x=(0,R().cacheDeferredResolver)(u,t,p);return x?['cache-deferred',x]:['network',O(t)]}retry(t,n,o,s){var u,c,l,h,p;if(null!==(u=o.error)&&void 0!==u&&null!==(c=u.extraInfo)&&void 0!==c&&c.aborted)return o;const{context:{attemptsCount:f=2}}=n;if(f>=4)return o;const{metricReporter:v,retryOnNetworkError:y,retryDelay:b}=this,R=null!==(l=null!==(h=null!==(p=(0,Q().recaptchaRetrier)(n,o))&&void 0!==p?p:(0,k().default)(v,o))&&void 0!==h?h:(0,O().operationRegistryRetrier)(v,n,o))&&void 0!==l?l:(0,x().networkErrorRetrier)(v,y,b,n,o);if(!R)return o;const{operationName:w}=n;return v.increment('frontend.niobe.retry',1,{operation_name:w,attempt_count:String(f)}),Promise.resolve(R).then(n=>{if(!n)return o;const u=this.transformOptions({...t,dedupePolicy:'no-dedupe',context:{...t.context,...n,attemptsCount:f+1}});return s(u).then(n=>this.retry(t,u,n,s))})}processResult({transformedOptions:t,result:n,promise:s,source:u}){const{cache:l,inflight:p,metricReporter:f,jitneyLogger:v,getRenderingState:y}=this;if('skip'===u)return;[n=>(0,S().storeInflightQuery)(p,t,n),()=>(0,R().cacheDeferredSentinel)(l,t,y)].forEach(t=>t(s));const b='graphql'===t.type?(0,h().getNormalizedItemsLocators)(t.operation):[],O=[n=>'cache'!==u&&(0,R().cacheResult)(l,t,n,b),()=>(0,S().clearInflightQuery)(p,t),n=>{var s;const c=f.now();null!==(s=o.MagicMove.value)&&void 0!==s&&s.anyActive.value&&o.MagicMove.value.activeViewTransition.value?o.MagicMove.value.activeViewTransition.value.finished.then(()=>{(0,w().reportMetrics)(f,v,t,n,u,c)}):L(()=>(0,w().reportMetrics)(f,v,t,n,u,c))},t=>{var n;if(null!==(n=t.extensions)&&void 0!==n&&n.traceId){var o,s;const n=t.error||null!==(o=t.errors)&&void 0!==o&&o.length?'error':'success';(0,c.saveTraceId)(null===(s=t.extensions)||void 0===s?void 0:s.traceId,n)}}];n?O.forEach(t=>t(n)):s.then(t=>O.forEach(n=>n(t)))}execute(t){if(t.queryRef)return t.queryRef;const n=this.transformOptions(t),[o,s]=(()=>{const o='deferrable'in t&&t.deferrable,s=this.syncResolve(n);if(s){const[n,u]=s;return[n,f().NiobeQueryRef.for({promise:Promise.resolve(u),result:u,clientType:this,options:t,deferred:o})]}const[u,c]=this.asyncResolve(n,t);return[u,f().NiobeQueryRef.for({promise:c,clientType:this,options:t,deferred:o})]})();return this.processResult({transformedOptions:n,result:s.result||void 0,promise:s.promise,source:o}),s}watchDebugPort(t){var n;t&&(t.addEventListener('message',t=>{switch(t.data.type){case'clear-cache':this.cache.clear()}}),null===(n=t.unref)||void 0===n||n.call(t))}useClientSideQuery(t){const o=(0,n.useMemo)(()=>new AbortController,[]),{signal:u}=o,c=(0,s.default)(()=>({...t,signal:u}),[t]),l=(0,n.useMemo)(()=>this.preloadQuery(c),[c,this]);return(0,n.useEffect)(()=>()=>{o.abort()},[]),this.usePreloadedQuery(l)}useQueryAggregate(t){const o=(0,n.useRef)(),s=(0,n.useRef)(void 0),{isRerenderScheduled:c,rerender:l}=(0,u.useRerender)(),h=t=>t===o.current,p=t=>{var n;c.current||(n=t,s.current===n.getResult())||(c.current=!0,l(!0))},f=t=>{o.current=t,t.onLoaded(p),t.watchOnce((t,n)=>{h(t)&&Promise.resolve().then(()=>{h(t)&&f(n)})}),p(t)};if(!o.current){const n=E().QueryAggregate.fromQueryRef(t,this);s.current=n.getResult(),f(n)}const v=(0,n.useRef)(t);if(t!==v.current){v.current=t;const n=o.current.replaceWith(t);s.current=n.getResult(),f(n)}const y=o.current.getResult();return s.current=y,{queryAggregateRef:o,setQueryAggregate:f,result:y}}usePreloadedQuery(t,o,s){const{queryAggregateRef:u,setQueryAggregate:c,result:l}=this.useQueryAggregate(t),h=(0,n.useCallback)((function(n){const o=u.current.refetch({variables:null!=n?n:t.options.variables,fetchPolicy:'network-only'});return c(o),o.onLoaded(()=>o.getResult())}),[u]),p=(0,n.useCallback)((async function({variables:t,updateQuery:n,fetchPolicy:o}){const{newQueryAggregate:s,newQueryPage:l}=u.current.addPage({variables:t,fetchPolicy:o},n);return c(s),await l.queryRef.promise,l.getResult()}),[u]);return(0,n.useMemo)(()=>({...l,refetch:h,fetchMore:p,client:this}),[p,h,l])}useMutation(t,o){const[s,u]=(0,n.useState)({data:void 0,error:void 0,called:!1,loading:!1}),c=(0,n.useRef)(o);return c.current=o,[(0,n.useCallback)(async n=>{const o=c.current;u(t=>({...t,loading:!0}));try{var s;const c=await this.mutate({mutation:t,...o,...n}),l=(null==n?void 0:n.update)||(null==o?void 0:o.update);l&&l(this,c),u({...c,data:null!==(s=c.data)&&void 0!==s?s:void 0,loading:!1,called:!0});const h=(null==n?void 0:n.onCompleted)||(null==o?void 0:o.onCompleted);return h&&h((null==c?void 0:c.data)||{}),c}catch(t){throw u({data:void 0,loading:!1,called:!0,error:t}),t}},[t,c]),s]}usePreloadedRestQuery(t){const{result:n}=this.useQueryAggregate(t);return n}useClientSideRestQuery(t){return{...this.useClientSideQuery({...t,type:'rest'}),abort(){}}}}e.NiobeMinimalistClient=I;var N=I;e.default=N}),"d60f20",["a27fc3","168bee","2be3fb","7989a6","f2f40f","f5faa4","a8e07a","b6122a","585e21","8e002d","7534fb","0b028d","220417","7e9feb","92bfea","506238","ebf2d0","6b80b0","3c3efd","fe1d2d","74ccbb","e73eae","c08074","871302","308f5e","067098","8a9601"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n,t={}){let o=0;return()=>{const c={...t,airlockInSequence:""+Math.min(5,o++)};n.increment('frontend.airbnb_apollo.airlock',1,{...c})}}}),"d78035",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryAggregate=void 0;var t=r(d[0]);function s(){const t=r(d[1]);return s=function(){return t},t}function n(){const t=r(d[2]);return n=function(){return t},t}const o={data:void 0};class u{static fromQueryRef(t,s){return new u({parent:void 0,client:s,type:'fetch',firstPage:new(n().QueryPage)({queryRef:t,client:s}),nextPages:[]})}constructor({parent:t,firstPage:s,nextPages:n,client:o,type:u}){this.parent=void 0,this.firstPage=void 0,this.nextPages=void 0,this.type=void 0,this.client=void 0,this.memo=void 0,this.parent=t,this.firstPage=s,this.nextPages=n,this.client=o,this.type=u,this.memo=new WeakMap}pages(){return[this.firstPage].concat(this.nextPages)}watchOnce(t){const s=this.pages().map((n,o)=>n.watchOnce(n=>{s.forEach(t=>t()),t(this,new u({parent:this,firstPage:0===o?n:this.firstPage,nextPages:o>=1?this.nextPages.slice(0,o-1).concat(n).concat(this.nextPages.slice(o)):this.nextPages,client:this.client,type:this.type}))}))}isLoading(){return this.firstPage.isLoading()}async onLoaded(s){return await Promise.all(this.pages().map(t=>t.queryRef.promise)),(()=>{var n;return null!==(n=t.MagicMove.value)&&void 0!==n&&n.anyActive.value&&t.MagicMove.value.activeViewTransition.value?t.MagicMove.value.activeViewTransition.value.finished.then(()=>s(this)):s(this)})()}getNetworkStatus(){if(this.pages().some(t=>t.isNetworkErrored()))return s().NetworkStatus.error;if(!this.pages().some(t=>t.isLoading()))return s().NetworkStatus.ready;switch(this.type){case'fetch':return s().NetworkStatus.loading;case'refetch':return s().NetworkStatus.refetch;case'fetchMore':return s().NetworkStatus.fetchMore;case'setVariables':return s().NetworkStatus.setVariables;default:return s().NetworkStatus.ready}}getResult(){var t,s;const{firstPage:n,nextPages:u}=this,h=n.getResult(),c=null===(t=this.loadedAncestor())||void 0===t?void 0:t.getResult(),l=h&&u.reduce((t,s)=>s.stitch(t),h),f=null!==(s=null!=l?l:c)&&void 0!==s?s:o;return this.augmentResultFor(f)}getMemoizedResult(t){var s,n;return null!==(s=this.memo.get(t))&&void 0!==s?s:null===(n=this.parent)||void 0===n?void 0:n.getMemoizedResult(t)}augmentResultFor(t){var s;const{firstPage:n}=this,o=this.getMemoizedResult(t);if(o&&o.networkStatus===this.getNetworkStatus())return o;const u={...t,data:null!==(s=t.data)&&void 0!==s?s:void 0,loading:this.isLoading(),stale:!1,variables:n.queryRef.options.variables,queryRef:n.queryRef,networkStatus:this.getNetworkStatus()};return this.memo.set(t,u),u}loadedAncestor(){if(this.parent)return this.parent.isLoading()?this.parent.loadedAncestor():this.parent}replaceWith(t){return new u({...this,parent:this,firstPage:new(n().QueryPage)({queryRef:t,client:this.client}),nextPages:[],type:'setVariables'})}refetch(t){return new u({...this,parent:this,firstPage:this.firstPage.refetch(t),nextPages:[],type:'refetch'})}addPage(t,s){const o=new(n().QueryPage)({queryRef:this.client.executeFrom({queryRef:this.firstPage.queryRef,options:t}),stitcher:s,client:this.client});return{newQueryAggregate:new u({...this,parent:this,firstPage:this.firstPage,nextPages:[...this.nextPages,o],type:'fetchMore'}),newQueryPage:o}}}e.QueryAggregate=u}),"e73eae",["168bee","436eb1","02695f"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(s,f){var p;const h=(0,u().default)(s,{method:'airlockRetrier'}),k=(0,o().getMinimalistGraphQLGhostingAppealUri)(f);if(k)return void(0,o().redirectToAirlock)(k);const v=(0,o().extractGraphqlAirlockError)(null===(p=f.error)||void 0===p?void 0:p.graphQLErrors)||(0,t.extractAirlockData)(f);if(!v)return;if(!(0,n.isFullpage)(v))return h(),new Promise(n=>{(0,c().default)({airlock:v,onSuccess:()=>{const o={fetchOptions:{headers:(0,l().getReplayAirlockHeader)(v,s)}};!(0,t.isLegacyAirlock)(v)||v.should_replay_request?n(o):n(void 0)},onError:()=>n(void 0),error:f})});(0,o().redirectToAirlock)((0,n.getFullpageURL)(v))};var t=r(d[0]),n=r(d[1]);function o(){const t=r(d[2]);return o=function(){return t},t}function u(){const t=babelHelpers.interopRequireDefault(r(d[3]));return u=function(){return t},t}function c(){const t=babelHelpers.interopRequireDefault(r(d[4]));return c=function(){return t},t}function l(){const t=r(d[5]);return l=function(){return t},t}}),"ebf2d0",["1700a4","70e2b8","88ca6d","d78035","20b3a2","6984df"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UnsubscribeMutationOperation=void 0;const t={document:void 0,getDocument:()=>r(d[1])(d[0]).then(babelHelpers.interopRequireWildcard).then(t=>t.default),name:'UnsubscribeMutation',type:'mutation',operationId:'accc8115c189c60629025981d7d23d3a4e33de11783b0c489ea677185c6da47f'};e.UnsubscribeMutationOperation=t}),"f5faa4",["539468","c592d7"]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(){const n=r(d[0]);return t=function(){return n},n}Object.defineProperty(e,"__esModule",{value:!0}),e.computeOperationCacheKey=function({operationName:n,variables:o,skip:c=!1}){return`${n}:${o?JSON.stringify((0,t().convertToStableObjectOrder)(o)):''}${c?':skipped':''}`}}),"fa1757",["7f2d15"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRecaptchaPlatformHeaders=function(t,u){if(!(0,o.deliverNiobeBotDetection)())return null;const c=(0,n.maybeGetRecaptchaV3TokenHeader)(t,u,!0);if(!c)return null;return c()},e.recaptchaRetrier=function(n,o){var s,l;const f=null===(s=o.error)||void 0===s||null===(l=s.graphQLErrors)||void 0===l?void 0:l.find(c);if(!f)return;const p=(t=>{if(void 0===t)return'unknown';const n=t[0];if('number'==typeof n)return String(n);return n})(f.path);return(0,t.getRecaptchaV3TokenHeader)({action:p,timeoutInMs:5e3,maxRetries:5,shouldThrow:!0}).then(t=>{var o;const u=null===(o=n.context)||void 0===o?void 0:o.fetchOptions;return{fetchOptions:{...u,headers:{...null==u?void 0:u.headers,...t}}}}).catch(()=>{(0,u.default)()})};var t=r(d[0]),n=r(d[1]),o=r(d[2]),u=babelHelpers.interopRequireDefault(r(d[3]));const c=t=>{const{extensions:{errorClass:n="",errorType:o="",response:{statusCode:u=0}={}}={}}=t;return"ValidationRequiredException"===n||"validation_required"===o||440===u}}),"fe1d2d",["fa27ff","913737","60f717","178cf3"]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/web/common/6067.a286cf5dba.js.map